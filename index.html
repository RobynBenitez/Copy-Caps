<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CLICKABOLS</title>

<style>

body{
    font-family: Arial;
    background:#111;
    color:#eee;
    display:flex;
    justify-content:center;
    padding:40px 15px;
}

.container{
    width:100%;
    max-width:650px;
    background:#1e1e1e;
    padding:25px;
    border-radius:28px;
}

h3{
    margin-top:25px;
}

textarea{
    width:100%;
    height:90px;
    margin-top:8px;
    padding:12px;
    border-radius:18px;
    border:none;
    background:#2a2a2a;
    color:white;
    resize:none;
}

.output-row{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    margin-top:15px;
}

.output-btn{
    padding:12px 16px;
    margin:6px;
    border:none;
    border-radius:18px;
    background:#333;
    color:white;
    cursor:pointer;
    transition:0.2s;
}

.output-btn.active{
    background:#7a1b1b;
}

.generate-btn{
    width:100%;
    padding:14px;
    margin-top:12px;
    border:none;
    border-radius:18px;
    background:#444;
    color:white;
    font-size:15px;
    cursor:pointer;
}

.top-info{
    margin-top:20px;
    text-align:left;
}

.top-info h2{
    margin:4px 0;
}

/* TITLE FONT */
.title-main{
    text-align:center;
    font-family:"Montserrat","Segoe UI",sans-serif;
    font-weight:900;
    font-size:32px;
    text-shadow:
        0 0 8px rgba(255,255,255,0.5),
        1px 1px 0 #000,
        2px 2px 0 #444,
        4px 4px 10px rgba(0,0,0,0.6);
}

</style>
</head>

<body>

<div class="container">

<h2 class="title-main">CLICKA BY RB</h2>

<h3>Bio and Repost (Paste FULL Airtable Row - TAB separated)</h3>
<textarea id="repost"></textarea>

<h3>Caption</h3>
<textarea id="captions"></textarea>

<h3>Topic</h3>
<textarea id="topics"></textarea>

<h3>Picture</h3>
<textarea id="pics"></textarea>

<button class="generate-btn" onclick="generate()">Generate Buttons</button>

<div id="topInfo" class="top-info"></div>

<div id="output"></div>

</div>

<script>

let activeButton = null;

function cleanLines(text){
    return text.split("\n")
        .map(l=>l.trim())
        .filter(l=>l && !l.includes(".txt"));
}

function createCopyButton(label, value){

    const btn = document.createElement("button");
    btn.className="output-btn";
    btn.innerText=label;

    btn.onclick = ()=>{

        navigator.clipboard.writeText(value);

        if(activeButton){
            activeButton.classList.remove("active");
        }

        btn.classList.add("active");
        activeButton = btn;
    };

    return btn;
}

function generate(){

    const output = document.getElementById("output");
    const topInfo = document.getElementById("topInfo");

    output.innerHTML="";
    topInfo.innerHTML="";

    const pics = cleanLines(document.getElementById("pics").value);
    const topics = cleanLines(document.getElementById("topics").value);

    const raw = document.getElementById("repost").value.trim();

    let username="", vpn="", location="", repostCaption="", repostAcc="";
    const password = "Ascension2025!";

    if(raw){

        const parts = raw.split("\t").map(p=>p.trim());

        username = parts[0] || "";
        vpn = parts[12] || "";
        location = parts[15] || "";
        repostCaption = parts[16] || "";
        repostAcc = parts[17] || "";
    }

    if(username || vpn || location){
        topInfo.innerHTML = `
            <h2>Username: ${username}</h2>
            <h2>VPN: ${vpn}</h2>
            <h2>Loc: ${location}</h2>
        `;
    }

    /* ===== Caption Smart Parser ===== */

    let captionInput = document.getElementById("captions").value.trim();

    let caps = [];

    if(captionInput){

        if(!captionInput.includes("{location}") && captionInput.includes("\n")){

            caps = captionInput
                .split("\n")
                .map(l=>l.trim())
                .filter(l=>l && !l.includes(".txt"));

            if(caps.length > 3){
                caps = caps.slice(0,3);
            }
        }

        else if(captionInput.includes("{location}") || captionInput.includes("\t")){

            caps = captionInput
                .replace(/{location}/g, location || "")
                .split("\t")
                .map(p=>p.trim())
                .filter(p=>p)
                .slice(0,3);
        }

        else{
            caps = [captionInput];
        }
    }

    /* ROW 1 - Pictures */

    const picRow = document.createElement("div");
    picRow.className="output-row";

    for(let i=0;i<3;i++){
        if(pics[i]){
            picRow.appendChild(
                createCopyButton("Pic"+(i+1), pics[i])
            );
        }
    }

    output.appendChild(picRow);

    /* ROW 2 - Username + Password */

    const userRow = document.createElement("div");
    userRow.className="output-row";

    if(username){
        userRow.appendChild(
            createCopyButton("Username", username)
        );
    }

    userRow.appendChild(
        createCopyButton("Password", password)
    );

    output.appendChild(userRow);

    /* ROW 3 - Captions */

    const capRow = document.createElement("div");
    capRow.className="output-row";

    for(let i=0;i<3;i++){
        if(caps[i]){
            capRow.appendChild(
                createCopyButton("Caption"+(i+1), caps[i])
            );
        }
    }

    output.appendChild(capRow);

    /* ROW 4 - Topics */

    const topRow = document.createElement("div");
    topRow.className="output-row";

    for(let i=0;i<3;i++){
        if(topics[i]){
            topRow.appendChild(
                createCopyButton("Topic"+(i+1), topics[i])
            );
        }
    }

    output.appendChild(topRow);

    /* ROW 5 - Repost Account + Repost Caption */

    const repostRow = document.createElement("div");
    repostRow.className="output-row";

    if(repostAcc){
        repostRow.appendChild(
            createCopyButton("Repost Account", repostAcc)
        );
    }

    if(repostCaption){
        repostRow.appendChild(
            createCopyButton("Repost Caption", repostCaption)
        );
    }

    output.appendChild(repostRow);
}

</script>

</body>
</html>
